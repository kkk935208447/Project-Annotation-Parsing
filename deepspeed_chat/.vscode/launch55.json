{
    // 使用 IntelliSense 了解相关属性。 
    // 悬停以查看现有属性的描述。
    // 欲了解更多信息，请访问: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python 调试一阶段LORA",
            "type": "debugpy",
            "request": "launch",
            "program": "/root/miniconda3/envs/dsc/bin/deepspeed",  // which deepspeed 查看位置
            "console": "integratedTerminal",
            "justMyCode": false,
            "env": {
                "PYTHONPATH": "${workspaceRoot}" // 设置vscode项目根路径,搜索包时优先从该目录进行,防止发生import包错误
            },
            "args": [
                "--num_gpus", "1", 
                "training/step1_supervised_finetuning/main.py",
                "--data_path","/root/DSC/datas",// TODO 修改官方线上数据集为自己的路径
                "--model_name_or_path","/root/sim_chatgpt/opt-350m",
                "--per_device_train_batch_size", "16",
                "--per_device_eval_batch_size", "16",
                "--max_seq_len", "512",
                "--learning_rate", "1e-3",
                "--weight_decay", "0.",
                "--num_train_epochs", "16",
                "--gradient_accumulation_steps", "2",
                "--lr_scheduler_type", "cosine",
                "--num_warmup_steps", "0",
                "--seed", "42",
                "--gradient_checkpointing",
                "--offload",
                "--zero_stage", "3",
                "--lora_dim", "64",
                "--lora_module_name", "decoder.layers.",
                "--deepspeed",
                "--only_optimize_lora",
                "--lora_learning_rate", "5e-4",
                "--compute_fp32_loss",
                "--enable_tensorboard",
                "--tensorboard_path","/root/autodl-tmp/DSC_out/ck",
                "--output_dir", "/root/autodl-tmp/DSC_out/ck"
            ]
        },
        {
            "name": "Python 调试一阶段FULL",
            "type": "debugpy",
            "request": "launch",
            "program": "/root/miniconda3/envs/dsc/bin/deepspeed",  // which deepspeed 查看位置
            "console": "integratedTerminal",
            "justMyCode": false,
            "env": {
                "PYTHONPATH": "${workspaceRoot}" // 设置vscode项目根路径,搜索包时优先从该目录进行,防止发生import包错误
            },
            "args": [
                "--num_gpus", "1", 
                "training/step1_supervised_finetuning/main.py",
                "--data_path","/root/DSC/datas",// TODO 修改官方线上数据集为自己的路径
                "--model_name_or_path","/root/sim_chatgpt/opt-350m",
                "--per_device_train_batch_size", "4",
                "--per_device_eval_batch_size", "4",
                "--max_seq_len", "512",
                "--learning_rate", "9.65e-6",
                "--weight_decay", "0.",
                "--num_train_epochs", "16",
                "--gradient_accumulation_steps", "3",
                "--lr_scheduler_type", "cosine",
                "--num_warmup_steps", "0",
                "--seed", "42",
                "--gradient_checkpointing",
                "--offload",
                "--zero_stage", "3",
                "--deepspeed",
                "--compute_fp32_loss",
                "--enable_tensorboard",
                "--tensorboard_path","/root/autodl-tmp/DSC_out/ck_full",
                "--output_dir", "/root/autodl-tmp/DSC_out/ck_full"
            ]
        }
    ]
}